name: PR Title

on:
  pull_request_target:
    types: [opened, reopened, edited, synchronize]

permissions:
  pull-requests: read

jobs:
  validate:
    name: Validate PR Title
    runs-on: ubuntu-latest
    steps:
      - uses: amannn/action-semantic-pull-request@v5
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          types: |
            feat
            fix
            perf
            refactor
            style
            test
            docs
            build
            ci
            chore
            revert
          requireScope: false
          subjectPattern: ^.+$
          subjectPatternError: |
            PR title must follow Conventional Commits format:

              <type>(optional-scope): description

            Types that trigger a release:
              feat:  → minor (x.Y.z)
              fix:   → patch (x.y.Z)
              feat!: → major (X.y.z)

            Types that do NOT trigger a release:
              chore, ci, docs, refactor, test, style, build, perf, revert

            Examples:
              feat(scanner): add TF-IDF clustering
              fix(nexus): handle 429 rate limiting
              ci: add PR title validation
          validateSingleCommit: false
